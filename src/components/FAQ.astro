---
import Badge from './Badge.astro';

interface Props {
  data?: any;
}

const { data } = Astro.props;

const defaultItems = [
  {
    question: 'What does this product do?',
    answer: 'Our platform helps you work smarter by automating routine tasks and surfacing what matters most, so you can focus on high-impact work.',
  },
  {
    question: 'Does it replace my existing tools?',
    answer: 'No â€” it works alongside your existing tools, enhancing your workflow without replacing anything you already use.',
  },
  {
    question: 'Is my data private and secure?',
    answer: 'Absolutely. Security is our top priority. All data is encrypted in transit and at rest. We follow industry best practices for data protection.',
  },
  {
    question: 'How do I get started?',
    answer: 'Getting started is simple. Sign up, connect your accounts, and you will be up and running in minutes.',
  },
];

const badge = data?.faqBadge ?? 'FAQs';
const heading = data?.faqHeading ?? 'Got any questions?';
const subheading = data?.faqSubheading ?? "We've got answers";
const faqItems = data?.faqItems
  ? data.faqItems.map((item: any) => ({
      question: item.question,
      answer: item.answer,
    }))
  : defaultItems;
---

<section id="faq" class="py-20 md:py-28 lg:py-32">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20">
      <!-- Left: Heading -->
      <div>
        <div class="mb-6">
          <Badge text={badge} />
        </div>
        <h2 class="text-3xl sm:text-4xl md:text-5xl font-normal text-white leading-tight">
          {heading}
        </h2>
        <p class="text-3xl sm:text-4xl md:text-5xl font-serif italic text-white/60 leading-tight">
          {subheading}
        </p>
      </div>

      <!-- Right: FAQ cards -->
      <div class="space-y-3">
        {faqItems.map((item: any, index: number) => (
          <details
            class="group faq-card rounded-xl border border-white/[0.08] bg-white/[0.03] overflow-hidden"
            open={index === 0 ? true : undefined}
          >
            <summary class="flex items-center justify-between p-5 text-sm text-white font-normal cursor-pointer hover:text-neutral-300 transition-colors">
              <span>{item.question}</span>
              <span class="faq-icon shrink-0 ml-4 w-5 h-5 flex items-center justify-center text-neutral-500">
                <svg class="faq-plus w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14M5 12h14" />
                </svg>
                <svg class="faq-minus w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14" />
                </svg>
              </span>
            </summary>
            <div class="px-5 pb-5 text-sm text-neutral-400 leading-relaxed">
              {item.answer}
            </div>
          </details>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .faq-plus {
    display: block;
  }
  .faq-minus {
    display: none;
  }
  details[open] .faq-plus {
    display: none;
  }
  details[open] .faq-minus {
    display: block;
  }
</style>
