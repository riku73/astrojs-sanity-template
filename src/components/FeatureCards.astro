---
import Badge from './Badge.astro';
import { urlFor } from '../lib/sanity';

interface Props {
  data?: any;
}

const { data } = Astro.props;

const defaultFeatures = [
  {
    image: '/assets/konstantin-kleine-V1NVvXmO_dk-unsplash.webp',
    title: 'Smart summaries',
    description: 'Get instant, accurate summaries of long emails and chaotic threads.',
  },
  {
    image: '/assets/michal-parzuchowski-HbhJyWnE9Oo-unsplash.webp',
    title: 'Reply generator',
    description: 'Smart drafts in your tone, ready for review, edit, and send.',
  },
  {
    image: '/assets/olivier-miche-OZACaaUskhg-unsplash.webp',
    title: 'Priority detection',
    description: "See what's urgent, what's pending, and what can wait with total clarity.",
  },
];

const badge = data?.featuresBadge ?? 'Features';
const headingLine1 = data?.featuresHeadingLine1 ?? 'Summarize, prioritize, and act with ease';
const headingLine2 = data?.featuresHeadingLine2 ?? 'through an AI that simplifies your day.';
const features = data?.featuresCards
  ? data.featuresCards.map((card: any) => ({
      title: card.title,
      description: card.description,
      image: urlFor(card.image).width(1920).format('webp').quality(80).url(),
    }))
  : defaultFeatures;
---

<section id="features" class="py-20 md:py-28 lg:py-32">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col items-start text-left lg:items-end lg:text-right mb-12">
      <div class="mb-6">
        <Badge text={badge} />
      </div>

      <p class="text-3xl sm:text-4xl md:text-5xl font-serif italic text-white/60 leading-tight">{headingLine1}</p>
      <h2 class="text-3xl sm:text-4xl md:text-5xl font-normal text-white leading-tight">{headingLine2}</h2>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-6">
      {features.map((feature: any) => (
        <div class="group relative rounded-2xl overflow-hidden aspect-[5/3] md:aspect-[3/4] border border-white/5 hover:border-white/10 transition-all duration-300">
          <img
            src={feature.image}
            alt={feature.title}
            class="absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
            loading="lazy"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>
          <div class="absolute bottom-0 left-0 right-0 p-4 md:p-6">
            <h3 class="text-base md:text-xl font-normal text-white mb-1">{feature.title}</h3>
            <p class="text-xs text-neutral-300 leading-snug">{feature.description}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
